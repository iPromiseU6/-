<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../../Themes/material/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../Themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../CSS/common.css">
    <link rel="stylesheet" type="text/css" href="../../CSS/BasicDataPreview.css">
    <link rel="stylesheet" type="text/css" href="../../CSS/BasicInfoCommon.css">
</head>
<body>
<div id="div_content">
    <form id="ff">
        <table id="basicData" class="displaytable" style="text-align: left;padding:20px;">
            <tr>
                <td width="35%"><span class="redTip">*</span>Type Name</td>
                <td width="65%">
                    <input type="text" class="easyui-textbox" data-options='required:true' id="input_typeName" style="width: 80%"/>
                </td>
            </tr>
            <tr>
                <td width="35%"><span class="redTip">*</span>Memo</td>
                <td width="65%">
                    <input class="easyui-textbox" data-options='required:true' id="input_memo" style="width: 80%"/>
                </td>
            </tr>
        </table>
    </form>
    <div class="submit_button" style="margin-left: 50px;">
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" onclick="save()"
           style="width:100px;margin-left: -70px;">Save</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" onclick="_close()"
           style="width:100px;margin-left: 70px;">Cancel</a>
    </div>
</div>
</body>
<script type="text/javascript" src="../../JS/common.js"></script>
<script type="text/javascript" src="../../JS/jquery.min.js"></script>
<script type="text/javascript" src="../../JS/jquery.easyui.js"></script>
<script type="text/javascript" src="../../Utils/ip.js"></script>
<script type="text/javascript" src="../../Utils/Request.js"></script>
<script type="text/javascript" src="../../Utils/BasicPreview.js"></script>
<script type="text/javascript">
    var gRequest = new RequestHandle();
    var gCurrid = getID();
    var gApiKey = "CHARGETYPE";
    var getData;

    $(document).ready(function () {
        var _param = {id: gCurrid};
        var _res;
        if (gCurrid) {
            _res = gRequest.putRemoteData(gApiKey, "get", _param);
            _res.done(function (data) {
                getData = data.data;
                getFormData(data.data);
            });
        }
    });

    function _close() {
        var parentLocation;
        parentLocation = searchParent("ChargeTypeList.html");
        parentLocation.dialogClose();
    }

    function save() {
        var _isValid = $("#ff").form('validate');
        if (!_isValid) {
            $.messager.alert("Warning", "Required entries not filled in");
            return;
        }
        saveData();
    }

    function saveData() {
        var _data = submitFormData();
        var _postData = $.extend(false, getData, _data);
        data = JSON.stringify(_postData);
        var _Id = _postData.id;
        if (_Id) {
            gRequest.putRemoteData(gApiKey, 'edit', JSON.parse(data)).done(function (result) {
                if (result.code == 0) {
                    var parentLocation;
                    parentLocation = searchParent("ChargeTypeList.html");
                    parentLocation.dialogClose();
                } else {
                    $.messager.alert("Info", result.msg);
                }
            })
        } else {
            gRequest.postRemoteData(gApiKey, 'add', data).done(function (result) {
                if (result.code == 0) {
                    var parentLocation;
                    parentLocation = searchParent("ChargeTypeList.html");
                    parentLocation.dialogClose();
                } else {
                    $.messager.alert("Info", result.msg);
                }
            })
        }
    }
</script>
</html>