<!--创建人：lhf-->
<!--创建时间：2018.12.2-->
<!--描述：page UserNotices-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../../Themes/material/easyui.css">
    <link rel="stylesheet" type="text/css" href="../../Themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../../CSS/common.css">
</head>
<body style="padding: 0px;">
<div id="div_layout" class="easyui-layout" style="height: 500px">
    <div id="noticesRead" title="Read Notices" class="easyui-panel"
         style="background:#fafafa;overflow: hidden">
        <table id="dgRead"></table>
    </div>
</div>
<div id="dlg" class="easyui-dialog" closed="true">
    <iframe id="ifrmEdit" height="100%" width="100%" frameborder="0" scrolling="no"></iframe>
</div>
</body>
<script type="text/javascript" src="../../JS/jquery.min.js"></script>
<script type="text/javascript" src="../../JS/jquery.easyui.js"></script>
<script type="text/javascript" src="../../JS/common.js"></script>
<script type="text/javascript" src="../../Utils/ip.js"></script>
<script type="text/javascript" src="../../Utils/ShareComponent.js"></script>
<script type="text/javascript" src="../../JS/ToolBar.js"></script>
<script type="text/javascript" src="../../JS/SearchComponent.js"></script>
<script type="text/javascript" src="../../Utils/BasicList.js"></script>
<script type="text/javascript" src="../../Utils/Request.js"></script>
<script type="text/javascript" src="../../Utils/Enum.js"></script>
<script type="text/javascript">
    var config = {dialogWidth: 400, dialogHeight: 300};
    //创建接口
    var gApiKey = "NOTICES";
    //创建请求对象
    var gRequest = new RequestHandle();
    //创建Url
    var gConfig = {
        toolbar: '#toolbar',
        pagination: 'true',
        fitColumns: 'false',
        rownumbers: 'true',
        pageSize: 10,
        height: 450,//显示20条数据已经调整好的高度
        width: '100%',
        striped: 'true',
        loadMsg: '正在吃力加载中.....',
        showFooter: 'true',
        singleSelect: true,
        columns: [
            [{
                field: 'title',
                title: 'Title',
                width: '30%',
                align: 'center',
            }, {
                field: 'createTime',
                title: 'createTime',
                width: '40%',
                align: 'center',
            }]
        ],
        onDblClickRow: function (index, row) {
            localStorage.setItem("userNoticesDataId",row.id);
            var pLocation = "UI/BasicSet/UserNoticesDetail.html?id="+ row.id;
            $("#ifrmEdit").attr("src", pLocation);
            constructDialog($('#dlg'), 'Info', config.dialogWidth, config.dialogHeight);
            AddDialog.dialog('open');
        },
    };
    //创建表格
    $('#dgRead').datagrid(gConfig);
    $(document).ready(function () {
        getData();
    });
    function getData(){
        gRequest.postRemoteData(gApiKey,'list',JSON.stringify({page: 1, pagenum: 10, status:1})).done(function (result) {
            $("#dgRead").datagrid("loadData",result.data.data);
        })
    }
    function closeDlg() {
        getData();
        AddDialog.dialog('close')
    }
</script>
</html>